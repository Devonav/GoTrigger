<div class="password-generator-container">
  <div class="password-generator-card">
    <!-- Header -->
    <div class="header">
      <button class="back-button" (click)="goBack()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <h1>Password Generator</h1>
      <div></div> <!-- Spacer for flex layout -->
    </div>

    <!-- Generated Password Display -->
    <div class="password-display">
      <div class="password-box">
        <input
          type="text"
          [value]="generatedPassword()"
          readonly
          class="password-input"
        />
        <div class="password-actions">
          <button
            class="btn-icon"
            (click)="generatePassword()"
            title="Regenerate"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
          <button
            class="btn-icon btn-copy"
            (click)="copyPassword()"
            [class.copied]="copyFeedback()"
            title="Copy"
          >
            @if (copyFeedback()) {
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
            } @else {
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            }
          </button>
        </div>
      </div>

      <!-- Strength Meter -->
      @if (passwordType() === 'random') {
        <div class="strength-meter">
          <div class="strength-bar">
            <div
              class="strength-fill"
              [style.width.%]="passwordStrength()"
              [style.background-color]="strengthColor()"
            ></div>
          </div>
          <span class="strength-label" [style.color]="strengthColor()">
            {{ strengthLabel() }}
          </span>
        </div>
      }
    </div>

    <!-- Password Type Tabs -->
    <div class="password-types">
      <button
        class="type-tab"
        [class.active]="passwordType() === 'random'"
        (click)="setPasswordType('random')"
      >
        Random
      </button>
      <button
        class="type-tab"
        [class.active]="passwordType() === 'memorable'"
        (click)="setPasswordType('memorable')"
      >
        Memorable
      </button>
      <button
        class="type-tab"
        [class.active]="passwordType() === 'pin'"
        (click)="setPasswordType('pin')"
      >
        PIN
      </button>
    </div>

    <!-- Random Password Options -->
    @if (passwordType() === 'random') {
      <div class="options-section">
        <h3>Options</h3>

        <!-- Length Slider -->
        <div class="option-row">
          <label>Length: {{ randomOptions().length }}</label>
          <input
            type="range"
            min="8"
            max="64"
            [value]="randomOptions().length"
            (input)="updateRandomOption('length', +$any($event.target).value)"
            class="slider"
          />
        </div>

        <!-- Character Type Checkboxes -->
        <div class="option-row">
          <label>
            <input
              type="checkbox"
              [checked]="randomOptions().uppercase"
              (change)="updateRandomOption('uppercase', $any($event.target).checked)"
            />
            <span>Uppercase (A-Z)</span>
          </label>
        </div>

        <div class="option-row">
          <label>
            <input
              type="checkbox"
              [checked]="randomOptions().lowercase"
              (change)="updateRandomOption('lowercase', $any($event.target).checked)"
            />
            <span>Lowercase (a-z)</span>
          </label>
        </div>

        <div class="option-row">
          <label>
            <input
              type="checkbox"
              [checked]="randomOptions().numbers"
              (change)="updateRandomOption('numbers', $any($event.target).checked)"
            />
            <span>Numbers (0-9)</span>
          </label>
        </div>

        <div class="option-row">
          <label>
            <input
              type="checkbox"
              [checked]="randomOptions().symbols"
              (change)="updateRandomOption('symbols', $any($event.target).checked)"
            />
            <span>Symbols (!@#$%^&*)</span>
          </label>
        </div>

        <!-- Advanced Options -->
        <div class="option-row advanced">
          <label>
            <input
              type="checkbox"
              [checked]="randomOptions().excludeSimilar"
              (change)="updateRandomOption('excludeSimilar', $any($event.target).checked)"
            />
            <span>Exclude similar characters (i, l, 1, L, o, 0, O)</span>
          </label>
        </div>

        <div class="option-row advanced">
          <label>
            <input
              type="checkbox"
              [checked]="randomOptions().excludeAmbiguous"
              (change)="updateRandomOption('excludeAmbiguous', $any($event.target).checked)"
            />
            <span>Exclude ambiguous symbols ({{ '{' }}{{ '}' }}[]()\/'"~,;:.)</span>
          </label>
        </div>
      </div>
    }

    <!-- Memorable Password Options -->
    @if (passwordType() === 'memorable') {
      <div class="options-section">
        <h3>Options</h3>

        <!-- Word Count Slider -->
        <div class="option-row">
          <label>Words: {{ memorableOptions().wordCount }}</label>
          <input
            type="range"
            min="3"
            max="8"
            [value]="memorableOptions().wordCount"
            (input)="updateMemorableOption('wordCount', +$any($event.target).value)"
            class="slider"
          />
        </div>

        <!-- Separator -->
        <div class="option-row">
          <label>Separator</label>
          <select
            [value]="memorableOptions().separator"
            (change)="updateMemorableOption('separator', $any($event.target).value)"
            class="select-input"
          >
            <option value="-">Hyphen (-)</option>
            <option value="_">Underscore (_)</option>
            <option value=".">Period (.)</option>
            <option value=" ">Space</option>
            <option value="">None</option>
          </select>
        </div>

        <!-- Capitalize -->
        <div class="option-row">
          <label>
            <input
              type="checkbox"
              [checked]="memorableOptions().capitalize"
              (change)="updateMemorableOption('capitalize', $any($event.target).checked)"
            />
            <span>Capitalize first letter of each word</span>
          </label>
        </div>

        <!-- Include Number -->
        <div class="option-row">
          <label>
            <input
              type="checkbox"
              [checked]="memorableOptions().includeNumber"
              (change)="updateMemorableOption('includeNumber', $any($event.target).checked)"
            />
            <span>Include a number</span>
          </label>
        </div>
      </div>
    }

    <!-- PIN Options -->
    @if (passwordType() === 'pin') {
      <div class="options-section">
        <h3>Options</h3>

        <!-- PIN Length Slider -->
        <div class="option-row">
          <label>Digits: {{ pinOptions().length }}</label>
          <input
            type="range"
            min="4"
            max="12"
            [value]="pinOptions().length"
            (input)="updatePinOption('length', +$any($event.target).value)"
            class="slider"
          />
        </div>
      </div>
    }

    <!-- Info Box -->
    <div class="info-box">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      @if (passwordType() === 'random') {
        <p>Random passwords are the most secure. Use them for important accounts.</p>
      }
      @if (passwordType() === 'memorable') {
        <p>Memorable passwords are easier to remember but still secure for most uses.</p>
      }
      @if (passwordType() === 'pin') {
        <p>PINs are best for devices and short access codes. Not recommended for account passwords.</p>
      }
    </div>
  </div>
</div>
